define(["jquery","core/str"],function(a,b){return{init:function(){var c=function(){var b=a("<div></div>").attr("class",i.attr("class"));b.attr("id","safeassign_loading_div"),h.append(b),d()},d=function(){var c=b.get_string("safeassign_loading_settings","plagiarism_safeassign");a.when(c).done(function(b){a("#safeassign_loading_div").append(b)})},e=function(){return a("#id_safeassign_global_reference").prop("disabled")},f=function(b,c){c=c?c:10;var d=a.Deferred(),e=0,f=setInterval(function(){e+=1,e>c?(d.reject(),clearInterval(f)):b()&&(d.resolve(),clearInterval(f))},1e3);return d.promise()},g=function(){var b=a("#safeassign_loading_div");b.hide(),i.removeAttr("style"),j.prop("checked",k),j.prop("disabled",!1),k&&(a("#id_safeassign_originality_report").prop("disabled",!1),a("#id_safeassign_global_reference").prop("disabled",!1))},h=a("#id_plagiarismdesc"),i=h.children("div").hide(),j=a("#id_safeassign_enabled"),k=j.prop("checked");j.prop("checked",!1),j.prop("disabled",!0),c();var l=f(e,30);l.then(g)}}});